<UserControl x:Class="TechEquipments.Views.Param.AIParamView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             MinHeight="260" MinWidth="520">

    <!--
        DataContext ожидается AIParam
        Пример использования:
        <views:AiParamView DataContext="{Binding CurrentParam}" />
    -->

    <Grid Margin="6">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="180"/>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="180"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ================= LEFT BLOCK (Max / Filtration / Min) ================= -->
        <Border Grid.Column="0"
                BorderBrush="Black"
                BorderThickness="1"
                Margin="6"
                Padding="10"
                >
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Max -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <dxe:TextEdit Tag="Max"
                                  Height="28"
                                  EditValue="{Binding Max, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                  Style="{StaticResource AppBaseEditStyle}"
                                  PreviewKeyDown="ParamEditable_EditValueChanged"/>
                    <!--EditValueChanged="ParamEditable_EditValueChanged-->

                    <TextBlock Grid.Column="1"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"
                               Text="max"
                               Style="{StaticResource AppTextBlockStyle}"/>
                </Grid>

                <!-- Filtration -->
                <Grid Grid.Row="1" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <dxe:TextEdit Grid.Column="0"
                                  Height="28"
                                  Style="{StaticResource AppBaseEditStyle}"
                                  IsReadOnly="True"
                                  EditValue="{Binding Flt}" />
                    <TextBlock Grid.Column="1"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"
                               Text="filtration"
                               Style="{StaticResource AppTextBlockStyle}"/>
                </Grid>

                <!-- Min -->
                <Grid Grid.Row="2" Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <dxe:TextEdit Grid.Column="0"
                                  Height="28"
                                  Style="{StaticResource AppBaseEditStyle}"
                                  IsReadOnly="True"
                                  EditValue="{Binding Min}" />
                    <TextBlock Grid.Column="1"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"
                               Text="min"
                               Style="{StaticResource AppTextBlockStyle}"/>
                </Grid>
            </Grid>
        </Border>

        <!-- ================= CENTER BLOCK (Vertical scale + Value/Unit/R) ================= -->
        <Grid Grid.Column="1" Margin="6">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="20"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions >
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ProgressBar and scale - Left -->
                <Grid Grid.Column="1" Grid.Row="1" x:Name="BarLeft">
                    <Border BorderBrush="Black" BorderThickness="1">
                        <dxe:ProgressBarEdit
                                Value="{Binding Value, Mode=OneWay}" 
                                Minimum="{Binding Min}"
                                Maximum="{Binding Max}"
                                ContentDisplayMode="Value" 
                                DisplayFormatString="PLC value:    {0}"
                                Orientation="Vertical"
                                Width="30"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Stretch"
                                ProgressBrush="DimGray"                                                       
                            />
                    </Border>
                </Grid>
                
                <Rectangle Grid.Column="0" Grid.Row="1" Height="1" Width="20" HorizontalAlignment="Right" VerticalAlignment="Top" Fill="Black" />
                <TextBlock Grid.Column="0" Grid.Row="1" Margin="0,0,8,0" HorizontalAlignment="Right" VerticalAlignment="Top" Style="{StaticResource AppTextBlockStyle}" Text="{Binding Max}" />
                <Rectangle Grid.Column="0" Grid.Row="1" Height="1" Width="10" HorizontalAlignment="Right" VerticalAlignment="Center" Fill="Black" />
                <Rectangle Grid.Column="0" Grid.Row="1" Height="1" Width="20" HorizontalAlignment="Right" VerticalAlignment="Bottom" Fill="Black" />
                <TextBlock Grid.Column="0" Grid.Row="1" Margin="0,0,8,0" HorizontalAlignment="Right" VerticalAlignment="Bottom" Style="{StaticResource AppTextBlockStyle}" Text="{Binding Min}" />

                <!-- ProgressBar and scale - Right -->
                <Grid Grid.Column="2" Grid.Row="1" x:Name="BarRight">
                    <Border BorderBrush="Black" BorderThickness="1">
                        <dxe:ProgressBarEdit
                                Value="{Binding HmiTrue, Mode=OneWay}" 
                                Minimum="{Binding MinR}"
                                Maximum="{Binding MaxR}"
                                ContentDisplayMode="Value" 
                                DisplayFormatString="HmiTrue:   {0}"
                                Orientation="Vertical"
                                Width="30"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Stretch"
                                ProgressBrush="ForestGreen"/>
                    </Border>
                </Grid>

                <Rectangle Grid.Column="3" Grid.Row="1" Height="1" Width="20" HorizontalAlignment="Left" VerticalAlignment="Top" Fill="Black" />
                <TextBlock Grid.Column="3" Grid.Row="1" Margin="8,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource AppTextBlockStyle}" Text="{Binding MaxR}" />
                <Rectangle Grid.Column="3" Grid.Row="1" Height="1" Width="10" HorizontalAlignment="Left" VerticalAlignment="Center" Fill="Black" />
                <Rectangle Grid.Column="3" Grid.Row="1" Height="1" Width="20" HorizontalAlignment="Left" VerticalAlignment="Bottom" Fill="Black" />
                <TextBlock Grid.Column="3" Grid.Row="1" Margin="8,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom" Style="{StaticResource AppTextBlockStyle}" Text="{Binding MinR}" />

            </Grid>
            
            <!-- Unit -->
            <TextBlock Text="{Binding Unit}" VerticalAlignment="Bottom" HorizontalAlignment="Center" Style="{StaticResource AppTextBlockStyle}"/>

        </Grid>

        <!-- ================= RIGHT BLOCK (MaxR / Coef / MinR) ================= -->
        <Border Grid.Column="2"
                BorderBrush="Black"
                BorderThickness="1"
                Margin="6"
                Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- MaxR -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="70"/>
                    </Grid.ColumnDefinitions>

                    <dxe:TextEdit Grid.Column="1"
                                  Height="28"
                                  Style="{StaticResource AppBaseEditStyle}"
                                  IsReadOnly="True"
                                  EditValue="{Binding MaxR}"/>
                    <TextBlock Grid.Column="0"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"
                               Text="maxR"
                                HorizontalAlignment="Right"
                               Style="{StaticResource AppTextBlockStyle}"/>
                </Grid>

                <!-- Coefficient -->
                <Grid Grid.Row="1" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="70"/>
                    </Grid.ColumnDefinitions>

                    <dxe:TextEdit Grid.Column="1"
                                  Height="28"
                                  Style="{StaticResource AppBaseEditStyle}"
                                  IsReadOnly="True"
                                  EditValue="{Binding Coef}"/>
                    <TextBlock Grid.Column="0"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"
                               Text="coefficient"
                               HorizontalAlignment="Right" 
                               Style="{StaticResource AppTextBlockStyle}"/>
                </Grid>

                <!-- MinR -->
                <Grid Grid.Row="2" Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="70"/>
                    </Grid.ColumnDefinitions>

                    <dxe:TextEdit Grid.Column="1"
                                  Height="28"
                                  Style="{StaticResource AppBaseEditStyle}"
                                  IsReadOnly="True"
                                  EditValue="{Binding MinR}"/>
                    <TextBlock Grid.Column="0"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"
                               Text="minR"
                               HorizontalAlignment="Right" 
                               Style="{StaticResource AppTextBlockStyle}"/>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>